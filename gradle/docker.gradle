/*
 * Copyright (c) 2009 - 2021, DHBW Mannheim - TIGERs Mannheim
 */

jib {
    to {
        image = "sumatra"
        auth {
            username = "docker"
            password = System.getenv("GITLAB_DOCKER_REGISTRY_TOKEN") ?: ""
        }
        tags = [rootProject.version]
    }
    from {
//        image = "ghcr.io/graalvm/jdk:latest"
        image = "ghcr.io/graalvm/jdk@sha256:baa525245fe29647d396c6a2e14caca6305b7800513da0aae47b2d4965894d62"
    }
    container {
        workingDirectory = "/Sumatra"
    }
    extraDirectories {
        paths {
            path {
                from = file('config')
                into = '/Sumatra/config'
            }
            path {
                from = file('src/main/jib')
                into = '/Sumatra/'
            }
        }
        permissions = [
                '/Sumatra/**': '777'
        ]
    }
}

